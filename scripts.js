function waitImagesLoaded(e,t){let n=0;const o=e.length;function r(){++n>=o&&t()}e.forEach((t=>{t.complete?r():(t.addEventListener("load",r),t.addEventListener("error",r))})),0===o&&t()}function initHeroCarousel(){const e=document.getElementById("hero-slides"),t=document.querySelectorAll(".hero-dots .dot");if(!e||0===t.length)return;let n=0;const o=e.children.length,r=()=>{n=(n+1)%o,e.style.transform=`translateX(-${100*n}%)`,t.forEach(((e,t)=>{e.classList.toggle("active",t===n)}))};t.forEach(((t,o)=>{t.addEventListener("click",(()=>{n=o,e.style.transform=`translateX(-${100*n}%)`,t.classList.add("active"),document.querySelectorAll(".hero-dots .dot").forEach(((e,t)=>{e.classList.toggle("active",t===n)}))}))})),setInterval(r,5e3)}function initEmailJS(){if("undefined"==typeof emailjs)return;emailjs.init("HXCThZROMytOt-wyp");const e=document.getElementById("contactForm");e&&e.addEventListener("submit",(t=>{t.preventDefault(),emailjs.sendForm("service_1ffkva1","template_ypdj9n9",e).then((()=>{alert("邮件已发送成功，我们将尽快与您联系！"),e.reset()})).catch((e=>{console.error("邮件发送失败：",e),alert("邮件发送失败，请稍后再试。")}))}))}function initCompareFeature(){const e=document.querySelector(".compare-features .btn");e&&e.addEventListener("click",(()=>{alert("对比功能暂未实现 (预留)！")}))}function initHamburgerMenu(){const e=document.getElementById("menuIcon"),t=document.getElementById("mobileNav"),n=document.getElementById("closeBtn");if(!e||!t||!n)return;e.addEventListener("click",(()=>{t.classList.add("active")})),n.addEventListener("click",(()=>{t.classList.remove("active")}));t.querySelectorAll("ul li a").forEach((e=>{e.addEventListener("click",(()=>{t.classList.remove("active")}))}))}function initModalWindows(){document.querySelectorAll("[data-modal-target]").forEach((e=>{e.addEventListener("click",(()=>{const t=document.querySelector(e.getAttribute("data-modal-target"));t&&t.classList.add("active")}))})),document.querySelectorAll("[data-modal-close]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".modal");t&&t.classList.remove("active")}))}))}function initInfiniteScroller(){const e=document.getElementById("infiniteScroller"),t=document.querySelector(".pause-btn");if(!e||!t)return;const n=["A peaceful brookside setting.png","A scenic riverside bend.png","A serene coastal shore.png","A shaded forest path.png"];let o=!1,r=.3,c=0,i=[],a=document.createElement("div");function l(e){const t=document.createElement("div");t.className="infinite-scroller-item",t.style.position="absolute",t.style.width="100%";const o=document.createElement("img");o.src=e,o.alt=e,o.style.width="100%",o.style.objectFit="cover",t.appendChild(o),a.appendChild(t);const r=0===i.length?0:i[i.length-1].x+t.offsetWidth;t.style.left=`${r}px`;const c={el:t,x:r,width:t.offsetWidth};i.push(c)}a.className="infinite-scroller-track",a.style.display="flex",a.style.position="relative",a.style.transform="translateX(0)",e.appendChild(a);for(let e=0;e<2;e++)n.forEach(l);function s tF(u){if(!o){const e=u-c;c=u;const t=r*(e/16.67);for(let e=0;e<i.length;e++){const n=i[e];n.x-=t,n.el.style.left=`${n.x}px`}const n=i[i.length-1];n.x+n.width<window.innerWidth+100&&l(n[i.length%i.length])}requestAnimationFrame(s tF)}t.classList.remove("paused"),t.addEventListener("click",(()=>{o=!o,t.classList.toggle("paused")})),requestAnimationFrame(s tF)}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("infiniteScroller"),t=document.querySelector(".infinite-scroller-track");if(e&&t&&(t.style.transform="translateX(0)",e.innerHTML+=e.innerHTML),document.getElementById("pauseBtn")){const n=document.getElementById("pauseBtn");let o=!1;n.addEventListener("click",(function(){o=!o,e.style.animationPlayState=o?"paused":"running",n.textContent=o?"▶":"❚❚"})),n.textContent="❚❚"}})),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".infinite-scroller-track");e&&(e.style.transform="translateX(0)")}));function initProductImageClick(){document.querySelectorAll(".product-card img").forEach((e=>{e.addEventListener("click",(()=>{const t=e.alt.toLowerCase().replace(/\s+/g,"-")+".html";window.location.href=t}))}))}function initFlipCards(){document.querySelectorAll(".flip-btn-front").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".card").style.transform="rotateY(180deg)"}))})),document.querySelectorAll(".flip-btn-back").forEach((e=>{e.addEventListener("click",(()=>{e.closest(".card").style.transform="rotateY(0deg)"}))}))}function initFrameAnimation(){const e=document.getElementById("animationCanvas"),t=e?.getContext("2d");if(!e||!t)return;const n=["A young man standing in a natural landscape1.png","A young man standing in a natural landscape2.png","A young man standing in a natural landscape3.png"];let o=[],r=0,c=!0,i=0,a=.02,l=1e3/24,s=0,u=0;const d=document.getElementById("playPauseButton");function m(){if(!c||0===u)return;if(!e||!t)return;requestAnimationFrame(f)}function f(eN){if(!c||0===u)return;if(eN-s>l){t.clearRect(0,0,e.width,e.height);let N=(r+1)%n.length;o[r]&&(t.globalAlpha=1-i,g(o[r])),o[N]&&(t.globalAlpha=i,g(o[N])),i+=a,i>=1&&(i=0,r=N),s=eN}requestAnimationFrame(f)}function g(n){const o=e.width/e.height,r=n.width/n.height;let c,i,a,l;if(r>o){i=.9*e.height,c=n.width*(i/n.height),a=(e.width-c)/2,l=(e.height-i)/2}else{c=e.width,i=n.height*(c/n.width),a=0,l=(e.height-i)/2}t.drawImage(n,a,l,c,i)}n.forEach(((e,t)=>{const r=new Image;r.src=e,r.onload=()=>{o[t]=r,u++,1===u&&requestAnimationFrame(f)},r.onerror=()=>console.error("❌ 图片加载失败: "+e)})),window.addEventListener("resize",(function(){if(!e)return;window.innerWidth>=1024?(e.width=window.innerWidth,e.height=.75*window.innerHeight):(e.width=window.innerWidth,e.height=.6*window.innerHeight)})),(function(){if(!e)return;window.innerWidth>=1024?(e.width=window.innerWidth,e.height=.75*window.innerHeight):(e.width=window.innerWidth,e.height=.6*window.innerHeight)})(),d?.addEventListener("click",(()=>{c=!c,d.textContent=c?"❚❚":"▶",c&&requestAnimationFrame(f)}))}function initTouch1CarouselTrack(){const e=document.querySelector(".touch1-carousel-track"),t=Array.from(e?.children||[]),n=document.querySelector(".touch1-prev-btn"),o=document.querySelector(".touch1-next-btn");if(!e||0===t.length||!n||!o)return;let r=0;const c=630;function i(){e.style.transform=`translateX(-${r*c}px)`,n.disabled=0===r,o.disabled=r===t.length-1}n.addEventListener("click",(()=>{r>0&&(r--,i())})),o.addEventListener("click",(()=>{r<t.length-1&&(r++,i())})),i()}function initspec1ManualCarouselTrack(){const e=document.querySelector(".spec1-carousel-container"),t=document.querySelector(".spec1-carousel-track");let n=Array.from(document.querySelectorAll(".spec1-carousel-slide"));const o=document.querySelector(".spec1-carousel-prev"),r=document.querySelector(".spec1-carousel-next");if(!e||!t||0===n.length||!o||!r)return void console.warn("spec1 hand-control carousel: elements or arrows not found!");const c=n.length;let i=1,a=!1,l=0,s=15;const u=n[0].cloneNode(!0),d=n[c-1].cloneNode(!0);function m(e=!0){h(),t.style.transition=e?"transform 0.5s ease-in-out":"none",window.innerWidth<=768?t.style.transform=`translateX(${-i*l+s/2}px)`:t.style.transform=`translateX(${-i*l}px)`,n.forEach((e=>e.classList.remove("active","prev","next","shadow"))),n[i]?.classList.add("active");const o=(i+1)%n.length,r=(i-1+n.length)%n.length;n[o]?.classList.add("next"),n[r]?.classList.add("prev"),n.forEach((e=>{e.classList.contains("active")||e.classList.add("shadow")})),n.forEach((e=>{const t=e.querySelector("a");t&&(t.style.pointerEvents=e.classList.contains("active")?"auto":"none")}))}function f(){a||(a=!0,i++,m(!0),setTimeout((()=>{i===n.length-1&&(t.style.transition="none",i=1,m(!1)),a=!1}),500))}function g(){a||(a=!0,i--,m(!0),setTimeout((()=>{0===i&&(t.style.transition="none",i=n.length-2,m(!1)),a=!1}),500))}function h(){if(window.innerWidth<=768){const t=e.offsetWidth;s=.04*t,n.forEach((e=>{e.style.width=`${.85*t}px`})),l=.85*t+s}else{n.forEach((e=>{e.style.width=""})),s=15;const e=n[1].getBoundingClientRect().width;l=e+s}}t.appendChild(u),t.insertBefore(d,t.firstChild),n=Array.from(t.querySelectorAll(".spec1-carousel-slide")),o.addEventListener("click",(()=>{a||g()})),r.addEventListener("click",(()=>{a||f()})),n.forEach((e=>{e.addEventListener("click",(t=>{e.classList.contains("active")||e.classList.contains("next")?(t.preventDefault(),a||f()):e.classList.contains("prev")&&(t.preventDefault(),a||g())}));const n=e.querySelector(".spec1-explore-btn");n&&n.addEventListener("click",(e=>{e.stopPropagation()}))})),t.addEventListener("touchstart",(function(e){1===e.touches.length&&!a&&(startX=e.touches[0].clientX,isSwiping=!0)}),{passive:!0}),t.addEventListener("touchmove",(()=>{}),{passive:!0}),t.addEventListener("touchend",(function(e){if(!isSwiping)return;isSwiping=!1;const t=e.changedTouches[0].clientX,n=t-startX;Math.abs(n)>20&&(n<0?f():g())}),{passive:!0});function p(){a=!1,t.style.transition="none",m(!1),setTimeout((()=>{t.style.transition="transform 0.5s ease-in-out"}),50)}window.addEventListener("resize",p),t.style.transition="none",m(!1),setTimeout((()=>{t.style.transition="transform 0.5s ease-in-out"}),50),window.innerWidth<=768?(o.style.display="block",r.style.display="block"):(o.style.display="block",r.style.display="block")}document.addEventListener("DOMContentLoaded",(()=>{initHeroCarousel(),initEmailJS(),initCompareFeature(),initHamburgerMenu(),initModalWindows(),initInfiniteScroller(),initProductImageClick(),initFlipCards(),initFrameAnimation(),initTouch1CarouselTrack()})),window.addEventListener("load",(()=>{const e=document.querySelectorAll(".spec1-carousel-slide img");e.length>0&&waitImagesLoaded(e,(()=>{initspec1ManualCarouselTrack()}))}));
