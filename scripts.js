/*************************************************** 
* scripts.js
***************************************************/
const initHeroCarousel=()=>{const a=document.getElementById("hero-slides"),b=document.querySelectorAll(".hero-dots .dot");if(!a||0===b.length)return;let c=0,d=a.children.length;const e=()=>{c=(c+1)%d;a.style.transform=`translateX(-${c*100}%)`,Array.from(b).forEach((a,b)=>{a.classList.toggle("active",b===c)})};Array.from(b).forEach((a,b)=>{a.addEventListener("click",()=>{c=b,a.style.transform=`translateX(-${c*100}%)`,Array.from(b=>{a.classList.toggle("active",b===c)})})});setInterval(e,5e3)};const initEmailJS=()=>{if("undefined"==typeof emailjs)return;emailjs.init("HXCThZROMytOt-wyp");const a=document.getElementById("contactForm");a&&a.addEventListener("submit",e=>{e.preventDefault(),emailjs.sendForm("service_1ffkva1","template_ypdj9n9",a).then(()=>{alert("邮件已发送成功，我们将尽快与您联系！"),a.reset()}).catch(e=>{console.error("邮件发送失败：",e),alert("邮件发送失败，请稍后再试。")})})};const initCompareFeature=()=>{const a=document.querySelector(".compare-features .btn");a&&a.addEventListener("click",()=>{alert("对比功能暂未实现 (预留)！")})};const initHamburgerMenu=()=>{const a=document.getElementById("menuIcon"),b=document.getElementById("mobileNav"),c=document.getElementById("closeBtn");if(!a||!b||!c)return;a.addEventListener("click",()=>{b.classList.add("active")}),c.addEventListener("click",()=>{b.classList.remove("active")});const d=b.querySelectorAll("ul li a");d.forEach(a=>{a.addEventListener("click",()=>{b.classList.remove("active")})})};const initModalWindows=()=>{document.querySelectorAll("[data-modal-target]").forEach(a=>{a.addEventListener("click",()=>{const b=document.querySelector(a.getAttribute("data-modal-target"));b&&b.classList.add("active")})});document.querySelectorAll("[data-modal-close]").forEach(a=>{a.addEventListener("click",()=>{const b=a.closest(".modal");b&&b.classList.remove("active")})})};const initInfiniteScroller=()=>{const a=document.getElementById("infiniteScroller"),b=document.querySelector(".pause-btn");if(!a||!b)return;const c=["A peaceful brookside setting.png","A scenic riverside bend.png","A serene coastal shore.png","A shaded forest path.png"];let d=!1,e=0.3,f=0,g=[],h;h=document.createElement("div"),h.className="infinite-scroller-track",h.style.display="flex",h.style.position="relative",h.style.transform="translateX(0)",a.appendChild(h);for(let i=0;i<2;i++)c.forEach(c=>{createItem(c)});function createItem(a){const b=document.createElement("div");b.className="infinite-scroller-item",b.style.position="absolute",b.style.width="100%";const e=document.createElement("img");e.src=a,e.alt=a,e.style.width="100%",e.style.objectFit="cover",b.appendChild(e),h.appendChild(b);const f=0===g.length?0:g[g.length-1].x+b.offsetWidth;return b.style.left=`${f}px`,g.push({el:b,x:f,width:b.offsetWidth}),void 0}function i(a){if(!d){let b=a-f;g.forEach(a=>{a.x-=b,a.el.style.left=`${a.x}px`});const e=g[g.length-1];e.x+e.width<window.innerWidth+100&&createItem(c[g.length%c.length])}requestAnimationFrame(i)}b.classList.remove("paused"),b.addEventListener("click",()=>{d=!d,b.classList.toggle("paused")}),requestAnimationFrame(i)};const initProductImageClick=()=>{document.querySelectorAll(".product-card img").forEach(a=>{a.addEventListener("click",()=>{const b=a.alt.toLowerCase().replace(/\s+/g,"-")+".html";window.location.href=b})})};const initFlipCards=()=>{document.querySelectorAll(".flip-btn-front").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(180deg)"})});document.querySelectorAll(".flip-btn-back").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(0deg)"})})};const initFrameAnimation=()=>{const a=document.getElementById("animationCanvas"),b=a?.getContext("2d");if(!a||!b)return;const c=["A young man standing in a natural landscape1.png","A young man standing in a natural landscape2.png","A young man standing in a natural landscape3.png"];let d=[],e=0,f=!0,g=0.02,h=1000/24,i=0,j=0,k=0;const l=document.getElementById("playPauseButton"),m=document.getElementById("animationContainer");window.addEventListener("DOMContentLoaded",()=>{requestAnimationFrame(n)});c.forEach((a,e)=>{const f=new Image;f.src=a,f.onload=()=>{d[e]=f,k++,console.log(`✅ 加载成功: ${a}`),1===k&&requestAnimationFrame(n)},f.onerror=()=>console.error(`❌ 图片加载失败: ${a}`)});function n(a){if(f&&0!==k){if(a-i>h){b.clearRect(0,0,a.width,a.height);let c=(e+1)%c.length;d[e]&&(b.globalAlpha=1-j, o(b,d[e])),d[c]&&(b.globalAlpha=j, o(b,d[c])),j+=g,j>=1&&(j=0,e=c),i=a}requestAnimationFrame(n)}}function o(a,c){a.drawImage(c,0,0,a.width,a.height)}l&&l.addEventListener("click",()=>{f=!f,l.textContent=f?"❚❚":"▶",f&&requestAnimationFrame(n)});window.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("animationCanvas"),b=document.querySelector(".infinite-scroller-track");a&&b&&(b.style.transform="translateX(0)",a.innerHTML+=a.innerHTML);const c=document.getElementById("pauseBtn");let d=!1;c.addEventListener("click",()=>{d=!d,a.style.animationPlayState=d?"paused":"running",c.textContent=d?"▶":"❚❚"}),c.textContent="❚❚"})};document.addEventListener("DOMContentLoaded",()=>{const a=document.querySelectorAll(".slider1-slide"),b=document.getElementById("slider1-play-btn"),c=document.getElementById("slider1-btn-icon"),d=document.querySelectorAll(".slider1-dot"),e=document.querySelector(".slider1-progress-bar"),f=document.querySelector(".view1-text"),g=document.querySelectorAll(".view1-btn"),h=document.querySelectorAll(".slider1-slide img");let i=0,j=!0,k,l, m=3000; if(!a.length||!b||!c||!d.length){console.warn("❌ initSlider1: 轮播元素未找到！");return} function n(b){const c=b-i; e.style.width=Math.min(c/m,1)*100+"%"; c<m?k=requestAnimationFrame(n):(o(),i=b)} function o(){i=0, updateSlide(++i), e.style.width="0%", l=null, j&&(k=requestAnimationFrame(n))} function updateSlide(a){i=a, a=a%a.length, a=a, a.forEach((a,b)=>{a.classList.toggle("active",b===i)}), d.forEach((a,b)=>{a.classList.toggle("active",b===i)}), e.style.width=((i+1)/a.length)*100+"%", f.textContent=a[i].querySelector("img").alt} g.forEach((a,b)=>{a.addEventListener("click",()=>{updateSlide(b),j=!1, cancelAnimationFrame(k), c.textContent="▶", b.classList.remove("playing","refresh"), b.classList.add("paused")})}); b.addEventListener("click",togglePlayPause); function togglePlayPause(){j? (j=!1, cancelAnimationFrame(k), c.textContent="▶", b.classList.remove("playing"),b.classList.add("paused")):(j=!0, i=0, updateSlide(i), c.textContent="❚❚", b.classList.remove("refresh"),b.classList.add("playing"),l=null, k=requestAnimationFrame(n))} updateSlide(0), requestAnimationFrame(n)});document.addEventListener("DOMContentLoaded",function(){const a=Array.from(document.querySelector(".touch1-carousel-track").children),b=document.querySelector(".touch1-prev-btn"),c=document.querySelector(".touch1-next-btn"),d=615+15;let e=0;function f(){document.querySelector(".touch1-carousel-track").style.transform=`translateX(-${e*d}px)`,b.disabled=0===e, c.disabled=e===a.length-1} b.addEventListener("click",()=>{e>0&&(e--,f())}), c.addEventListener("click",()=>{e<a.length-1&&(e++,f())}), f()});document.addEventListener("DOMContentLoaded",()=>{initHeroCarousel();initEmailJS();initCompareFeature();initHamburgerMenu();initModalWindows();initInfiniteScroller();initProductImageClick();initFlipCards();initFrameAnimation();initSlider1();initTouch1CarouselTrack()});document.addEventListener("DOMContentLoaded",function(){const a=Array.from(document.querySelector(".touch1-carousel-track").children),b=document.querySelector(".touch1-prev-btn"),c=document.querySelector(".touch1-next-btn"),d=615+15;let e=0,f=a.length;function g(){document.querySelector(".touch1-carousel-track").style.transform=`translateX(-${e*d}px)`,b.disabled=0===e, c.disabled=e===f-1} b.addEventListener("click",()=>{e>0&&(e--,g())}), c.addEventListener("click",()=>{e<f-1&&(e++,g())}), g()}); 
const initProductImageClick=()=>{document.querySelectorAll(".product-card img").forEach(a=>{a.addEventListener("click",()=>{const b=a.alt.toLowerCase().replace(/\s+/g,"-")+".html";window.location.href=b})})};const initFlipCards=()=>{document.querySelectorAll(".flip-btn-front").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(180deg)"})});document.querySelectorAll(".flip-btn-back").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(0deg)"})})};document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("animationCanvas"),b=a?.getContext("2d");if(!a||!b)return;const c=["A young man standing in a natural landscape1.png","A young man standing in a natural landscape2.png","A young man standing in a natural landscape3.png"];let d=[],e=0,f=!0,g=0.02,h=1000/24,i=0,j=0,k=0;const l=document.getElementById("playPauseButton"),m=document.getElementById("animationContainer");let n=0;images.forEach((a,e)=>{const f=new Image;f.src=a;f.onload=()=>{d[e]=f,++k,1===k&&requestAnimationFrame(o)};f.onerror=()=>console.error(`❌ 图片加载失败: ${a}`)});function o(a){if(f&&k!==0){if(a-n>h){b.clearRect(0,0,a.width,a.height);let c=(e+1)%c.length;d[e]&&(b.globalAlpha=1-j,drawCover(b,d[e])),d[c]&&(b.globalAlpha=j,drawCover(b,d[c]));j+=g,j>=1&&(j=0,e=c),n=a}requestAnimationFrame(o)}}function drawCover(a,c){const d=a.canvas.width/a.canvas.height,e=c.width/c.height;let f,e,g,h;if(e>d){h=a.canvas.height*0.9,f=c.width*(h/c.height),g=(a.canvas.width-f)/2,e=(a.canvas.height-h)/2}else{f=a.canvas.width,e=c.height*(f/c.width),g=0,h=(a.canvas.height-e)/2}a.drawImage(c,g,h,f,e)}l&&l.addEventListener("click",()=>{f=!f,l.textContent=f?"❚❚":"▶",f&&requestAnimationFrame(o)}),window.addEventListener("DOMContentLoaded",()=>{requestAnimationFrame(o)});}); 
/* 7) 图片点击 */const initProductImageClick=()=>{document.querySelectorAll(".product-card img").forEach(a=>{a.addEventListener("click",()=>{const b=a.alt.toLowerCase().replace(/\s+/g,"-")+".html";window.location.href=b})})}; 
/* 8) 卡片 */const initFlipCards=()=>{document.querySelectorAll(".flip-btn-front").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(180deg)"})});document.querySelectorAll(".flip-btn-back").forEach(a=>{a.addEventListener("click",()=>{a.closest(".card").style.transform="rotateY(0deg)"})})};
