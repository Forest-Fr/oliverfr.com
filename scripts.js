document.addEventListener("DOMContentLoaded",function(){var a=document.querySelectorAll(".slider1-slide"),b=document.getElementById("slider1-play-btn"),c=document.getElementById("slider1-btn-icon"),d=document.querySelectorAll(".slider1-dot"),e=document.querySelector(".slider1-progress-bar"),f=document.querySelector(".view1-text"),g=document.querySelectorAll(".view1-btn"),h=document.querySelectorAll(".slider1-slide img");var i=0,j=!0,k,l,m=3000,n=!1,o=1000;if(!a.length||!b||!c||!d.length){console.warn("❌ initSlider1: 轮播元素未找到！");return}function p(q){if(n)return;n=!0;setTimeout(function(){n=!1},o);window.open("example.html","_blank")}g.forEach(function(q,r){q.addEventListener("click",function(s){s.preventDefault(),s.stopPropagation();var t=a[r].querySelector("img").alt;p(t)})});h.forEach(function(q,r){q.addEventListener("click",function(s){s.preventDefault(),s.stopPropagation();var t=a[r].querySelector("img").alt;p(t)})});function u(q){i=q;a.forEach(function(r,s){r.classList.toggle("active",s===i)});d.forEach(function(r){r.classList.remove("active")});d[i].classList.add("active");e.style.width=((i+1)/a.length*100)+"%";f.textContent=a[i].querySelector("img").alt}function v(w){l||(l=w);var x=w-l,y=Math.min(x/m,1)*100;e.style.width=y+"%";x<m?k=requestAnimationFrame(v):w0()}function w0(){if(i<a.length-1){i++;u(i);e.style.width="0%";l=null;j&&(k=requestAnimationFrame(v))}else{j=!1;c.textContent="↻",b.classList.remove("playing","paused"),b.classList.add("refresh")}}function z(){if(!j){j=!0,i=0,u(i),c.textContent="⏸",b.classList.remove("refresh"),b.classList.add("playing"),l=null,k=requestAnimationFrame(v)}else{j=!1,cancelAnimationFrame(k),c.textContent="▶",b.classList.remove("playing"),b.classList.add("paused")}}d.forEach(function(q,r){q.addEventListener("click",function(){u(r),j=!1,cancelAnimationFrame(k),c.textContent="▶",b.classList.remove("playing","refresh"),b.classList.add("paused")})});b.addEventListener("click",z);u(0);requestAnimationFrame(v)});
