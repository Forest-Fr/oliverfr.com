/*************************************************** 
 * scripts.js
 ***************************************************/
(function(){const initHeroCarousel=()=>{const hs=document.getElementById("hero-slides"),ds=document.querySelectorAll(".hero-dots .dot");if(!hs||!ds.length)return;let i=0,t=hs.children.length;const u=()=>{i=(i+1)%t;hs.style.transform=`translateX(-${i*100}%)`,ds.forEach((e,n)=>{e.classList.toggle("active",n===i)})};ds.forEach((e,n)=>{e.addEventListener("click",()=>{i=n;hs.style.transform=`translateX(-${i*100}%)`,ds.forEach((r,s)=>{r.classList.toggle("active",s===i)})})}),setInterval(u,5000)};const initEmailJS=()=>{if(typeof emailjs==="undefined")return;emailjs.init("HXCThZROMytOt-wyp");const f=document.getElementById("contactForm");f&&f.addEventListener("submit",e=>{e.preventDefault(),emailjs.sendForm("service_1ffkva1","template_ypdj9n9",f).then(()=>{alert("邮件已发送成功，我们将尽快与您联系！"),f.reset()}).catch(r=>{console.error("邮件发送失败：",r),alert("邮件发送失败，请稍后再试。")})})};const initCompareFeature=()=>{const e=document.querySelector(".compare-features .btn");e&&e.addEventListener("click",()=>{alert("对比功能暂未实现 (预留)！")})};const initHamburgerMenu=()=>{const e=document.getElementById("menuIcon"),t=document.getElementById("mobileNav"),n=document.getElementById("closeBtn");if(!e||!t||!n)return;e.addEventListener("click",()=>{t.classList.add("active")}),n.addEventListener("click",()=>{t.classList.remove("active")}),t.querySelectorAll("ul li a").forEach(r=>{r.addEventListener("click",()=>{t.classList.remove("active")})})};const initModalWindows=()=>{document.querySelectorAll("[data-modal-target]").forEach(e=>{e.addEventListener("click",()=>{const t=document.querySelector(e.getAttribute("data-modal-target"));t&&t.classList.add("active")})});document.querySelectorAll("[data-modal-close]").forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".modal");t&&t.classList.remove("active")})})};const initInfiniteScroller=()=>{const e=document.getElementById("infiniteScroller"),t=document.querySelector(".pause-btn");if(!e||!t)return;const n=["A peaceful brookside setting.png","A scenic riverside bend.png","A serene coastal shore.png","A shaded forest path.png"];let r=false,s=0.3,o=0,i=[],u;u=document.createElement("div"),u.className="infinite-scroller-track",u.style.display="flex",u.style.position="relative",u.style.transform="translateX(0)",e.appendChild(u);for(let c=0;c<2;c++)n.forEach(f=>{createItem(f)});function createItem(f){const l=document.createElement("div");l.className="infinite-scroller-item",l.style.position="absolute",l.style.width="100%";const a=document.createElement("img");a.src=f,a.alt=f,a.style.width="100%",a.style.objectFit="cover",l.appendChild(a),u.appendChild(l);const d=i.length===0?0:(i[i.length-1].x+l.offsetWidth);l.style.left=`${d}px`,i.push({el:l,x:d,width:l.offsetWidth})}function cF(e){if(!r){const t=e-o;t&&(o=e);const n=s*(t/16.67);for(let r=0;r<i.length;r++){let a=i[r];a.x-=n,a.el.style.left=`${a.x}px`}const d=i[i.length-1];if(d.x+d.width<window.innerWidth+100)createItem(n[i.length%n.length])}requestAnimationFrame(cF)}t.classList.remove("paused"),t.addEventListener("click",()=>{r=!r,t.classList.toggle("paused")}),requestAnimationFrame(cF)};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("infiniteScroller"),t=document.querySelector(".infinite-scroller-track");if(e&&t){t.style.transform="translateX(0)";e.innerHTML+=e.innerHTML}const n=document.getElementById("pauseBtn");let r=false;n.addEventListener("click",function(){r=!r,e.style.animationPlayState=r?"paused":"running",n.textContent=r?"▶":"❚❚"}),n.textContent="❚❚"}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".infinite-scroller-track");e&&(e.style.transform="translateX(0)")});const initProductImageClick=()=>{document.querySelectorAll(".product-card img").forEach(e=>{e.addEventListener("click",()=>{const t=e.alt.toLowerCase().replace(/\s+/g,"-")+".html";window.location.href=t})})};const initFlipCards=()=>{document.querySelectorAll(".flip-btn-front").forEach(e=>{e.addEventListener("click",()=>{e.closest(".card").style.transform="rotateY(180deg)"})});document.querySelectorAll(".flip-btn-back").forEach(e=>{e.addEventListener("click",()=>{e.closest(".card").style.transform="rotateY(0deg)"})})};const initFrameAnimation=()=>{const e=document.getElementById("animationCanvas"),t=e?.getContext("2d");if(!e||!t)return;const n=["A young man standing in a natural landscape1.png","A young man standing in a natural landscape2.png","A young man standing in a natural landscape3.png"];let r=[],i=0,s=true,o=0,u=0.02,a=1000/24,c=0,d=0;const f=document.getElementById("playPauseButton");n.forEach((e,r)=>{let i=new Image();i.src=e,i.onload=()=>{r in r||(r[r]=i),d++,console.log(`✅ 加载成功: ${e}`),d===1&&requestAnimationFrame(l)},i.onerror=()=>console.error(`❌ 图片加载失败: ${e}`)});function l(e){if(!s||d===0)return;if(e-c>a){t.clearRect(0,0,e.width,e.height);let n=(i+1)%n.length;r[i]&&(t.globalAlpha=1-o, m(r[i])),r[(i+1)%n.length]&&(t.globalAlpha=o, m(r[(i+1)%n.length])),o+=u,o>=1&&(o=0,i=(i+1)%n.length),c=e}requestAnimationFrame(l)}function m(e){const r=e.width/e.height,i=e.width/e.height;let s,eVal,o; if(e.width/e.height>e.width/e.height){s=e.height*0.9,eVal=e.width*(s/e.height),o=(e.width-eVal)/2,eVal=(e.height-eVal)/2}else{s=e.width,eVal=e.height*(s/e.width),o=0,eVal=(e.height-eVal)/2}t.drawImage(e,o,eVal,s,eVal)}f?.addEventListener("click",()=>{s=!s,f.textContent=s?"❚❚":"▶",s&&requestAnimationFrame(l)})};const initTouch1CarouselTrack=()=>{const e=document.querySelector(".touch1-carousel-track"),t=Array.from(e?.children||[]),n=document.querySelector(".touch1-prev-btn"),r=document.querySelector(".touch1-next-btn");if(!e||t.length===0||!n||!r)return;let i=0,o=615+15;function u(){e.style.transform=`translateX(-${i*o}px)`,n.disabled=(i===0),r.disabled=(i===t.length-1)};n.addEventListener("click",()=>{i>0&&(i--,u())}),r.addEventListener("click",()=>{i<t.length-1&&(i++,u())}),u()};document.addEventListener("DOMContentLoaded",()=>{initHeroCarousel();initEmailJS();initCompareFeature();initHamburgerMenu();initModalWindows();initInfiniteScroller();initProductImageClick();initFlipCards();initFrameAnimation();initTouch1CarouselTrack()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".touch1-carousel-track"),t=Array.from(e.children),n=document.querySelector(".touch1-prev-btn"),r=document.querySelector(".touch1-next-btn");let i=0,o=t.length,u=615+15;function s(){e.style.transform=`translateX(-${i*u}px)`,n.disabled=(i===0),r.disabled=(i===o-1)};n.addEventListener("click",()=>{i>0&&(i--,s())}),r.addEventListener("click",()=>{i<o-1&&(i++,s())}),s()});const initdemo1CarouselTrack=()=>{const e=document.querySelector(".demo1-carousel-container"),t=document.querySelector(".demo1-carousel-track"),n=Array.from(document.querySelectorAll(".demo1-carousel-slide")),r=document.querySelector(".demo1-carousel-prev"),i=document.querySelector(".demo1-carousel-next"),u=Array.from(document.querySelectorAll(".demo1-carousel-dot"));if(!e||!t||n.length===0||!u.length){console.warn("Carousel elements not found!");return}const a=n.slice(0,6);a.forEach((e,t)=>{e.setAttribute("data-index",t)});const c=a[0],d=a[5],f=c.cloneNode(true),l=d.cloneNode(true);f.setAttribute("data-index",0),l.setAttribute("data-index",5),t.insertBefore(l,t.firstChild),t.appendChild(f);const s=Array.from(t.querySelectorAll(".demo1-carousel-slide")),o=s.length;let m=1,v=false;function p(){return window.innerWidth<=768?Math.floor(window.innerWidth*0.8)+15:(()=>{const e=e.querySelector(".demo1-carousel-slide");let t=e?e.getBoundingClientRect().width:0;return t===0?(e.clientWidth||window.innerWidth)+15:t+15})()}function h(){const e=p(),t=-m*e;t&&(t.toString(),t);t!==undefined&&(t=Math.floor(t));t!==undefined&&(t=t),t!==undefined&&(t=t);t!==undefined&&(t=t),t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);t!==undefined&&(t=t);u.forEach((e,t)=>{e.addEventListener("click",()=>{j(t),y()})});function j(e){if(v)return;v=true,m=e+1,t.style.transition="transform 0.5s ease-in-out",w()}function x(){if(v)return;v=true,m--,t.style.transition="transform 0.5s ease-in-out",w()}function w(){const e=p(),n=-m*e;t.style.transform=`translateX(${n}px)`,s.forEach((r,i)=>{r.classList.toggle("active",i===m)}),u.forEach((r,i)=>{r.classList.toggle("active",i===((m===0)?5:(m===o-1)?0:m-1) )}),setInterval(()=>{},500),v=false}r?.addEventListener("click",()=>{x(),y()}),i?.addEventListener("click",()=>{j(((m-1+u.length)%u.length)),y()});let yInterval=setInterval(()=>{j()},5000);function y(){clearInterval(yInterval),yInterval=setInterval(()=>{j()},5000)};t.addEventListener("transitionend",()=>{if(m===o-1){t.style.transition="none",m=1,w(),void t.offsetWidth,t.style.transition="transform 0.5s ease-in-out"}if(m===0){t.style.transition="none",m=5,w(),void t.offsetWidth,t.style.transition="transform 0.5s ease-in-out"}v=false})}document.addEventListener("DOMContentLoaded",initdemo1CarouselTrack);const initSpec1CarouselTrack=()=>{const e=document.querySelector(".spec1-carousel-track"),t=Array.from(document.querySelectorAll(".spec1-carousel-slide")),n=document.querySelector(".spec1-carousel-prev"),r=document.querySelector(".spec1-carousel-next"),i=Array.from(document.querySelectorAll(".spec1-carousel-dot"));if(!e||t.length===0||!i.length)return;let o=1,u=t[0].offsetWidth+15;const a=t[0],c=t[t.length-1],d=a.cloneNode(true),f=c.cloneNode(true);e.appendChild(d),e.insertBefore(f,e.firstChild);let s=Array.from(e.querySelectorAll(".spec1-carousel-slide")),l=s.length;let m=1,v=false;function g(){return window.innerWidth<=768?Math.floor(window.innerWidth*0.8)+15:(()=>{const e=document.querySelector(".spec1-carousel-slide");let t=e?e.getBoundingClientRect().width:0;return t===0?(document.querySelector(".spec1-carousel-container").clientWidth||window.innerWidth)+15:t+15})()}function h(){u=g();const e=-m*u;return e}function p(){e.style.transform=`translateX(${h()}px)`,i.forEach((e,t)=>{let n=m===0?5:m===l-1?0:m-1; e.classList.toggle("active",t===n)}),s.forEach(r=>{r.classList.remove("active","prev","next","shadow");const i=r.querySelector("a");i&&(i.style.pointerEvents="none")}),s[m].classList.add("active"),s[m].querySelector("a")&&(s[m].querySelector("a").style.pointerEvents="auto"),s[(m+1)%l].classList.add("next"),s[(m-1+l)%l].classList.add("prev"),s.forEach(e=>{!e.classList.contains("active")&&e.classList.add("shadow")})}function j(e){if(v)return;v=true; m=e+1; e!==undefined&&(e=m-1),e!==undefined||(m++),e===undefined&&(m++),e===undefined||(m=e+1),e!==undefined||(m++),e===undefined||(m=e+1),e===undefined||(m=e+1),e===undefined||(m=e+1),e===undefined||(m=e+1),e===undefined||(m=e+1),e===undefined||(m=e+1); e===undefined||(m=e+1); e===undefined||(m=e+1);e===undefined||(m=e+1);e===undefined||(m=e+1); e===undefined||(m=e+1); e===undefined||(m=e+1);e===undefined||(m=e+1); e===undefined||(m=e+1);e===undefined||(m=e+1); m>=l?(e=m, e=m, m=1, p(), t.style.transition="none",void t.offsetWidth,t.style.transition="transform 0.5s ease-in-out"):p();setTimeout(()=>{v=false},500)}function x(){if(v)return;v=true; m--,p(),setTimeout(()=>{v=false},500)}n?.addEventListener("click",()=>{x(),y()}),r?.addEventListener("click",()=>{j(),y()}),i.forEach((e,t)=>{e.addEventListener("click",()=>{j(t),y()})});let yInterval=setInterval(()=>{j()},5000);function y(){clearInterval(yInterval),yInterval=setInterval(()=>{j()},5000)};setTimeout(()=>{e.style.transition="none",m=1,p(),setTimeout(()=>{e.style.transition="transform 0.5s ease-in-out"},50)},50),window.innerWidth<=768&&setTimeout(()=>{e.style.transition="transform 0.3s ease-in-out"},500),p(),document.addEventListener("DOMContentLoaded",()=>{i.forEach(e=>{e.addEventListener("click",()=>{})})})};document.addEventListener("DOMContentLoaded",initSpec1CarouselTrack);document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".touch1-carousel-track"),t=Array.from(e.children),n=document.querySelector(".touch1-prev-btn"),r=document.querySelector(".touch1-next-btn");let i=0,o=t.length,u=615+15;function a(){e.style.transform=`translateX(-${i*u}px)`,n.disabled=(i===0),r.disabled=(i===o-1)};n.addEventListener("click",()=>{i>0&&(i--,a())}),r.addEventListener("click",()=>{i<o-1&&(i++,a())}),a()});document.addEventListener("DOMContentLoaded",()=>{initHeroCarousel();initEmailJS();initCompareFeature();initHamburgerMenu();initModalWindows();initInfiniteScroller();initProductImageClick();initFlipCards();initFrameAnimation();initDemo1CarouselTrack();initSpec1CarouselTrack();initTouch1CarouselTrack()});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".touch1-carousel-track"),t=Array.from(e.children),n=document.querySelector(".touch1-prev-btn"),r=document.querySelector(".touch1-next-btn");let i=0,o=t.length,u=615+15;function a(){e.style.transform=`translateX(-${i*u}px)`,n.disabled=(i===0),r.disabled=(i===o-1)};n.addEventListener("click",()=>{i>0&&(i--,a())}),r.addEventListener("click",()=>{i<o-1&&(i++,a())}),a()})})();
