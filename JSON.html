<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>KV 转换工具</title>
</head>
<body>
  <h2>Cloudflare Worker KV 转换器</h2>
  <textarea id="input" style="width:100%;height:300px" placeholder="粘贴例如：finance: `...`"></textarea>
  <button onclick="convert()">转换为 KV JSON</button>
  <h3>输出：</h3>
  <pre id="output" style="background:#eee;padding:10px;border:1px solid #ccc;"></pre>

  <script>
    function convert() {
      const raw = document.getElementById("input").value;
      const result = {};
      const regex = /^([a-zA-Z0-9_]+):\s*`([\s\S]*?)`/gm;
      let match;

      while ((match = regex.exec(raw)) !== null) {
        const key = `STRUCT:${match[1]}:default`;
        const val = match[2]
          .trim()
          .replace(/\\/g, '\\\\')  // 反斜杠
          .replace(/"/g, '\\"')    // 双引号
          .replace(/\r?\n/g, '\\n'); // 换行
        result[key] = val;
      }

      document.getElementById("output").textContent = JSON.stringify(result, null, 2);
    }
  </script>
</body>
</html>
